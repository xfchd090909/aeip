<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>IP 属地检测</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; padding: 50px; background: #f4f7f6; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 400px; }
        .item { margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .label { font-weight: bold; color: #555; }
        .value { color: #007bff; float: right; }
    </style>
</head>
<body>
    <div class="card">
        <h2>我的网络信息</h2>
        <div id="result">加载中...</div>
    </div>

    <script>
        async function fetchIP() {
            try {
                // 请求 Netlify 的后端接口
                const response = await fetch('/.netlify/functions/get-ip');
                const data = await response.json();

                const html = `
                    <div class="item"><span class="label">IP 地址:</span> <span class="value">${data.ip}</span></div>
                    <div class="item"><span class="label">ASN:</span> <span class="value">${data.asn}</span></div>
                    <div class="item"><span class="label">运营商:</span> <span class="value">${data.as_name}</span></div>
                    <div class="item"><span class="label">域名:</span> <span class="value">${data.as_domain}</span></div>
                    <div class="item"><span class="label">国家代码:</span> <span class="value">${data.country_code}</span></div>
                    <div class="item"><span class="label">国家:</span> <span class="value">${data.country}</span></div>
                    <div class="item"><span class="label">大洲:</span> <span class="value">${data.continent} (${data.continent_code})</span></div>
                `;
                document.getElementById('result').innerHTML = html;
            } catch (error) {
                document.getElementById('result').innerText = "获取失败，请稍后再试";
            }
        }
        fetchIP();
    </script>
</body>
</html>
